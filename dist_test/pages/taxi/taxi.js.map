{"version":3,"file":"pages/taxi/taxi.js","sources":["webpack:///./src/pages/taxi/taxi.vue?0391","webpack:///taxi.vue","webpack:///./src/pages/taxi/taxi.vue?cd3f","webpack:///._src_pages_images_circle.png","webpack:///._src_pages_images_current-location.png","webpack:///._src_pages_images_toplace.png","webpack:///._src_pages_images_usericon.png","webpack:///._src_pages_taxi_taxi.less","webpack:///._src_pages_taxi_taxi.vue","webpack:///./src/pages/taxi/taxi.vue?5448","webpack:///./src/pages/taxi/taxi.vue?2a2b","webpack:///._src_utils_utils.js"],"sourcesContent":["import { render, staticRenderFns } from \"./taxi.vue?vue&type=template&id=0ed8821b&\"\nimport script from \"./taxi.vue?vue&type=script&lang=js&\"\nexport * from \"./taxi.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"5cc73fc5\"\n  \n)\n\ncomponent.options.__file = \"src/pages/taxi/taxi.vue\"\nexport default component.exports","<template>\r\n  <view>\r\n    <view class=\"navbar\" @tap=\"toProfile\">\r\n      <view class=\"userIcon\">\r\n        <image src=\"../images/usericon.png\" style=\"width: 30px; height: 30px\" />\r\n      </view>\r\n      <view class=\"navbarText\">呼叫车辆</view>\r\n    </view>\r\n    <map\r\n      id=\"map\"\r\n      :longitude=\"longitude\"\r\n      :latitude=\"latitude\"\r\n      scale=\"14\"\r\n      :show-location=\"true\"\r\n      @regionchange=\"regionchange\"\r\n      @markertap=\"markertap\"\r\n    >\r\n      <view class=\"return\">\r\n        <image\r\n          src=\"../images/current-location.png\"\r\n          style=\"width: 30px; height: 30px\"\r\n          @tap=\"toCurrent\"\r\n        ></image>\r\n      </view>\r\n      <!-- 打车前 -->\r\n      <view class=\"container\" v-show=\"status == 0\">\r\n        <view class=\"from\" @tap=\"chooseStart\">\r\n          <image src=\"../images/circle.png\" style=\"width: 24px; height: 24px\" />\r\n          <text style=\"padding-left: 10px\">{{ startPlace.name }}</text>\r\n        </view>\r\n        <view class=\"to\" @tap=\"chooseEnd\">\r\n          <image\r\n            src=\"../images/toplace.png\"\r\n            style=\"width: 24px; height: 24px\"\r\n          />\r\n          <text style=\"padding-left: 10px\">{{ endPlace.name }}</text>\r\n        </view>\r\n        <view class=\"predict\">预估花费：{{ cost }}元</view>\r\n        <view class=\"confirm\">\r\n          <button class=\"btn\" @tap=\"confirmOrder\" v-show=\"isClick\">\r\n            点击确认下单\r\n          </button>\r\n          <button class=\"btn\" style=\"background-color: #ccc\" v-show=\"!isClick\">\r\n            点击确认下单\r\n          </button>\r\n        </view>\r\n      </view>\r\n      <!-- 司机接单前 -->\r\n      <view class=\"container\" v-show=\"status == 1\">\r\n        <view class=\"calling\"> 正在全力为您呼叫... </view>\r\n        <view class=\"confirm-place\">\r\n          请确认上车地点\r\n          <text\r\n            style=\"\r\n              width: 60%;\r\n              color: #fb841e;\r\n              overflow: hidden;\r\n              white-space: nowrap;\r\n              text-overflow: ellipsis;\r\n            \"\r\n            >{{ startPlace.name }}</text\r\n          >\r\n        </view>\r\n        <view class=\"cancel-order\">\r\n          <button class=\"btn\" @tap=\"cancelOrder\">取消订单</button>\r\n        </view>\r\n      </view>\r\n      <!-- 司机接单后到达前 -->\r\n      <view class=\"container\" v-show=\"status == 2\">\r\n        <view class=\"driver-info\">\r\n          <view class=\"text-info\">\r\n            <view style=\"font-size: 22px; color: #000\">{{\r\n              driver.licenseTag\r\n            }}</view>\r\n            <view style=\"font-size: 16px; color: rgb(94, 94, 94)\">{{\r\n              driver.carInfo\r\n            }}</view>\r\n            <view style=\"font-size: 14px\"\r\n              >{{ driver.name }} {{ driver.score }}\r\n              {{ driver.orderNum }}单</view\r\n            >\r\n          </view>\r\n          <view class=\"img-info\">\r\n            <image\r\n              :src=\"driver.avatar?driver.avatar:'../images/usericon.png'\"\r\n              style=\"width: 50px; height: 50px; border-radius: 50%\"\r\n            />\r\n          </view>\r\n        </view>\r\n        <view class=\"coming\">\r\n          司机正在全力赶来，请避开拥挤人群等候\r\n          <view class=\"tips\"\r\n            >请前往\r\n            <text style=\"color: #fb841e\">{{ startPlace.name }}</text>\r\n            上车\r\n          </view>\r\n        </view>\r\n      </view>\r\n      <!-- 司机达到后 -->\r\n      <view class=\"container\" v-show=\"status == 3\">\r\n        <view class=\"driver-info\">\r\n          <view class=\"text-info\">\r\n            <view style=\"font-size: 22px; color: #000\">{{\r\n              driver.licenseTag\r\n            }}</view>\r\n            <view style=\"font-size: 16px; color: rgb(94, 94, 94)\">{{\r\n              driver.carInfo\r\n            }}</view>\r\n            <view style=\"font-size: 14px\"\r\n              >{{ driver.name }} {{ driver.score }}\r\n              {{ driver.orderNum }}单</view\r\n            >\r\n          </view>\r\n          <view class=\"img-info\">\r\n            <image\r\n              :src=\"driver.avatar\"\r\n              style=\"width: 50px; height: 50px; border-radius: 50%\"\r\n            />\r\n          </view>\r\n        </view>\r\n        <view class=\"coming\">\r\n          正在前往目的地\r\n          <view class=\"tips\">请系好安全带，佩戴好口罩，安全出行</view>\r\n        </view>\r\n      </view>\r\n      <!-- 到达目的地 -->\r\n      <view class=\"container\" v-show=\"status == 4\">\r\n        <view class=\"calling\"> 已到达目的地 </view>\r\n        <view class=\"confirm-place\">\r\n          从\r\n          <text\r\n            style=\"\r\n              width: 40%;\r\n              color: #fb841e;\r\n              overflow: hidden;\r\n              white-space: nowrap;\r\n              text-overflow: ellipsis;\r\n            \"\r\n            >{{ startPlace.name }}</text\r\n          >\r\n          到\r\n          <text\r\n            style=\"\r\n              width: 40%;\r\n              color: #fb841e;\r\n              overflow: hidden;\r\n              white-space: nowrap;\r\n              text-overflow: ellipsis;\r\n            \"\r\n            >{{ endPlace.name }}</text\r\n          >\r\n        </view>\r\n        <view class=\"cancel-order\">\r\n          <button class=\"btn\" @tap=\"payMoney\">点击支付费用 {{}}元</button>\r\n        </view>\r\n      </view>\r\n    </map>\r\n  </view>\r\n</template>\r\n<script>\r\nimport \"./taxi.less\";\r\nimport Taro from \"@tarojs/taro\";\r\nimport {\r\n  set as setGlobalData,\r\n  get as getGlobalData,\r\n} from \"../../utils/global_data\";\r\nimport { baseUrl } from \"../../utils/baseurl\";\r\nimport { getCost } from \"../../utils/utils\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 是否取消订单\r\n      isCancel: false,\r\n      // status代表状态 0：打车前；1：等待司机接单；2：司机接单后到达前；3：司机到达后\r\n      status: 0,\r\n      latitude: 23.099994,\r\n      longitude: 113.32452,\r\n      passengerId: 0,\r\n      isClick: false,\r\n      timeId_pick: \"\",\r\n      timeId_arrive: \"\",\r\n      cost: 0,\r\n      markers: [\r\n        {\r\n          id: 0,\r\n          iconPath: \"\",\r\n          latitude: 23.099994,\r\n          longitude: 113.32452,\r\n          width: 50,\r\n          height: 50,\r\n        },\r\n      ],\r\n      startPlace: {\r\n        address: \"起点\",\r\n        name: \"起点\",\r\n        latitude: 0,\r\n        longitude: 0,\r\n      },\r\n      endPlace: {\r\n        address: \"您到哪下车\",\r\n        name: \"您到哪下车\",\r\n        latitude: 0,\r\n        longitude: 0,\r\n      },\r\n      driver: {\r\n        id: 0,\r\n        name: \"王平\",\r\n        score: \"5.0\",\r\n        licenseTag: \"苏AD76571\",\r\n        carInfo: \"白色 长安逸动新能源\",\r\n        orderNum: 2000,\r\n        avatar: \"../images/usericon.png\",\r\n      },\r\n    };\r\n  },\r\n  onLoad() {\r\n    this.toCurrent();\r\n    this.getCurrentUser();\r\n  },\r\n  methods: {\r\n    toProfile() {\r\n      if (!getGlobalData(\"isLogin\")) {\r\n        Taro.redirectTo({\r\n          url: \"/pages/login/login\",\r\n        });\r\n      } else {\r\n        Taro.redirectTo({\r\n          url: \"/pages/profile/profile\",\r\n        });\r\n      }\r\n    },\r\n    getCurrentUser() {\r\n      const token = getGlobalData(\"token\");\r\n      Taro.request({\r\n        url: baseUrl.passenger + \"travel/passenger/currentPAX\",\r\n        method: \"GET\",\r\n        header: {\r\n          Authorization: token,\r\n        },\r\n      }).then((res) => {\r\n        console.log(res.data);\r\n        // this.passengerId = res.data\r\n        // 登录成功，修改登录状态以及用户信息\r\n        if (res.data.success) {\r\n          setGlobalData(\"isLogin\", true);\r\n          setGlobalData(\"userInfo\", res.data.data);\r\n          this.passengerId = res.data.data.pkId;\r\n        } else {\r\n          // 登录失败，清空token并修改登录状态\r\n          Taro.setStorageSync(\"token\", \"\");\r\n          setGlobalData(\"isLogin\", false);\r\n        }\r\n      });\r\n    },\r\n    // 移动区域 type: begin/end\r\n    regionchange(e) {\r\n      console.log(e.type);\r\n    },\r\n    // 点击标记点\r\n    markertap(e) {\r\n      console.log(\"markertap:\", e.detail.markerId);\r\n    },\r\n    // 回到当前所在地点\r\n    toCurrent() {\r\n      var that = this;\r\n      Taro.getLocation({\r\n        type: \"wgs84\",\r\n        success(res) {\r\n          that.latitude = res.latitude;\r\n          that.longitude = res.longitude;\r\n          that.$set(that.markers, 0, {\r\n            id: 0,\r\n            iconPath: \"\",\r\n            latitude: that.latitude,\r\n            longitude: that.longitude,\r\n            width: 50,\r\n            height: 50,\r\n          });\r\n        },\r\n      });\r\n    },\r\n    chooseStart() {\r\n      var that = this;\r\n      Taro.chooseLocation({\r\n        success(res) {\r\n          console.log(\"起点\", res);\r\n          // \"key\" 记得加引号\r\n          that.$set(that.startPlace, \"name\", res.name);\r\n          that.$set(that.startPlace, \"address\", res.address);\r\n          that.$set(that.startPlace, \"latitude\", res.latitude);\r\n          that.$set(that.startPlace, \"longitude\", res.longitude);\r\n          if (\r\n            that.startPlace.latitude != 0 &&\r\n            that.startPlace.longitude != 0 &&\r\n            that.endPlace.latitude != 0 &&\r\n            that.endPlace.longitude != 0 &&\r\n            that.startPlace.name != \"\" &&\r\n            that.endPlace.name != \"\"\r\n          ) {\r\n            that.isClick = true;\r\n            that.cost = getCost(\r\n              that.startPlace.latitude,\r\n              that.startPlace.longitude,\r\n              that.endPlace.latitude,\r\n              that.endPlace.longitude\r\n            );\r\n          }\r\n          console.log(\"this.isClick\", that.isClick);\r\n        },\r\n      });\r\n    },\r\n    chooseEnd() {\r\n      var that = this;\r\n      Taro.chooseLocation({\r\n        success(res) {\r\n          console.log(\"终点\", res);\r\n          that.$set(that.endPlace, \"name\", res.name);\r\n          that.$set(that.endPlace, \"address\", res.address);\r\n          that.$set(that.endPlace, \"latitude\", res.latitude);\r\n          that.$set(that.endPlace, \"longitude\", res.longitude);\r\n          if (\r\n            that.startPlace.latitude != 0 &&\r\n            that.startPlace.longitude != 0 &&\r\n            that.endPlace.latitude != 0 &&\r\n            that.endPlace.longitude != 0 &&\r\n            that.startPlace.name != \"\" &&\r\n            that.endPlace.name != \"\"\r\n          ) {\r\n            that.isClick = true;\r\n            that.cost = getCost(\r\n              that.startPlace.latitude,\r\n              that.startPlace.longitude,\r\n              that.endPlace.latitude,\r\n              that.endPlace.longitude\r\n            );\r\n          }\r\n          console.log(\"this.isClick\", that.isClick);\r\n        },\r\n      });\r\n    },\r\n    // 点击确认下单\r\n    confirmOrder() {\r\n      if (getGlobalData(\"isLogin\")) {\r\n        this.status = 1;\r\n        this.isCancel = false;\r\n        // 发送下单请求\r\n        const payload = {\r\n          passengerId: this.passengerId,\r\n          beginName: this.startPlace.name,\r\n          beginLng: this.startPlace.longitude,\r\n          beginLat: this.startPlace.latitude,\r\n          endName: this.endPlace.name,\r\n          endLng: this.endPlace.longitude,\r\n          endLat: this.endPlace.latitude,\r\n        };\r\n        Taro.request({\r\n          url: baseUrl.platform + \"travel/order/create\",\r\n          method: \"POST\",\r\n          data: payload,\r\n        }).then((res) => {\r\n          console.log(\"下单后返回\", res.data);\r\n          // 暂时先这么写，如果存在进行中的订单\r\n          if (res.data.data == \"下单成功\") {\r\n            // 定时查询查看接单情况\r\n            clearInterval(this.timeId_pick);\r\n            this.timeId_pick = setInterval(() => {\r\n              this.getResponse();\r\n            }, 2000);\r\n          } else if (res.data.data == \"存在进行中的订单\") {\r\n            this.showTips();\r\n          }\r\n        });\r\n      } else {\r\n        Taro.redirectTo({ url: \"/pages/login/login\" });\r\n      }\r\n    },\r\n    // 查询接单情况\r\n    getResponse() {\r\n      console.log(\"baseUrl.platform\", baseUrl.platform);\r\n      Taro.request({\r\n        url: baseUrl.platform + \"travel/push/passenger\",\r\n        method: \"GET\",\r\n        data: {\r\n          passengerId: this.passengerId,\r\n        },\r\n      }).then((res) => {\r\n        console.log(\"接单结果\", res.data);\r\n        const data = res.data;\r\n        if (data.success) {\r\n          this.$set(this.driver, \"id\", data.data.account);\r\n          this.$set(this.driver, \"name\", data.data.nickname);\r\n          this.$set(this.driver, \"licenseTag\", data.data.carNum);\r\n          this.$set(this.driver, \"avatar\", data.data.avatar);\r\n          this.$set(\r\n            this.driver,\r\n            \"carInfo\",\r\n            data.data.carColor + \"\" + data.data.carBrand\r\n          );\r\n          this.status = 3;\r\n          clearInterval(this.timeId_pick);\r\n          clearInterval(this.timeId_arrive);\r\n          this.timeId_arrive = setInterval(() => {\r\n            this.getIsArrival();\r\n          }, 2000);\r\n        }\r\n      });\r\n    },\r\n    // 查询到达目的地\r\n    getIsArrival() {\r\n      Taro.request({\r\n        url: baseUrl.platform + \"travel/push/getCompleteMessage\",\r\n        method: \"GET\",\r\n        data: {\r\n          passengerId: this.passengerId,\r\n        },\r\n      }).then((res) => {\r\n        console.log(\"完成订单\", res.data);\r\n        if (res.data.code == 200) {\r\n          clearInterval(this.timeId_arrive);\r\n          Taro.showToast({\r\n            title: \"订单完成\",\r\n            icon: \"success\",\r\n            duration: 2000,\r\n          });\r\n          this.status = 0;\r\n          Taro.redirectTo({ url: \"/pages/taxi/taxi\" });\r\n        }\r\n      });\r\n    },\r\n    // 取消订单\r\n    cancelOrder() {\r\n      this.isCancel = true;\r\n      Taro.request({\r\n        url: baseUrl.platform + \"travel/order/cancel\",\r\n        method: \"POST\",\r\n        data: {\r\n          passengerId: 1,\r\n        },\r\n      }).then((res) => {\r\n        console.log(\"点击取消订单\", res.data);\r\n        this.status = 0;\r\n        clearInterval(this.timeId_pick);\r\n      });\r\n    },\r\n    // 显示提示框\r\n    showTips() {\r\n      var that = this;\r\n      Taro.showModal({\r\n        title: \"提示\",\r\n        content: \"您有正在进行中的订单，点击任意按钮取消进行中的订单\",\r\n        success: function (res) {\r\n          if (res.confirm) {\r\n            that.cancelOrder();\r\n          } else if (res.cancel) {\r\n            that.cancelOrder();\r\n          }\r\n        },\r\n      });\r\n    },\r\n    payMoney() {},\r\n  },\r\n};\r\n</script>\r\n","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"view\", [\n    _c(\"view\", { staticClass: \"navbar\", on: { tap: _vm.toProfile } }, [\n      _c(\"view\", { staticClass: \"userIcon\" }, [\n        _c(\"image\", {\n          staticStyle: { width: \"30px\", height: \"30px\" },\n          attrs: { src: require(\"../images/usericon.png\") },\n        }),\n      ]),\n      _c(\"view\", { staticClass: \"navbarText\" }, [_vm._v(\"呼叫车辆\")]),\n    ]),\n    _c(\n      \"map\",\n      {\n        attrs: {\n          id: \"map\",\n          longitude: _vm.longitude,\n          latitude: _vm.latitude,\n          scale: \"14\",\n          \"show-location\": true,\n        },\n        on: { regionchange: _vm.regionchange, markertap: _vm.markertap },\n      },\n      [\n        _c(\"view\", { staticClass: \"return\" }, [\n          _c(\"image\", {\n            staticStyle: { width: \"30px\", height: \"30px\" },\n            attrs: { src: require(\"../images/current-location.png\") },\n            on: { tap: _vm.toCurrent },\n          }),\n        ]),\n        _c(\n          \"view\",\n          {\n            directives: [\n              {\n                name: \"show\",\n                rawName: \"v-show\",\n                value: _vm.status == 0,\n                expression: \"status == 0\",\n              },\n            ],\n            staticClass: \"container\",\n          },\n          [\n            _c(\"view\", { staticClass: \"from\", on: { tap: _vm.chooseStart } }, [\n              _c(\"image\", {\n                staticStyle: { width: \"24px\", height: \"24px\" },\n                attrs: { src: require(\"../images/circle.png\") },\n              }),\n              _c(\"text\", { staticStyle: { \"padding-left\": \"10px\" } }, [\n                _vm._v(_vm._s(_vm.startPlace.name)),\n              ]),\n            ]),\n            _c(\"view\", { staticClass: \"to\", on: { tap: _vm.chooseEnd } }, [\n              _c(\"image\", {\n                staticStyle: { width: \"24px\", height: \"24px\" },\n                attrs: { src: require(\"../images/toplace.png\") },\n              }),\n              _c(\"text\", { staticStyle: { \"padding-left\": \"10px\" } }, [\n                _vm._v(_vm._s(_vm.endPlace.name)),\n              ]),\n            ]),\n            _c(\"view\", { staticClass: \"predict\" }, [\n              _vm._v(\"预估花费：\" + _vm._s(_vm.cost) + \"元\"),\n            ]),\n            _c(\"view\", { staticClass: \"confirm\" }, [\n              _c(\n                \"button\",\n                {\n                  directives: [\n                    {\n                      name: \"show\",\n                      rawName: \"v-show\",\n                      value: _vm.isClick,\n                      expression: \"isClick\",\n                    },\n                  ],\n                  staticClass: \"btn\",\n                  on: { tap: _vm.confirmOrder },\n                },\n                [_vm._v(\" 点击确认下单 \")]\n              ),\n              _c(\n                \"button\",\n                {\n                  directives: [\n                    {\n                      name: \"show\",\n                      rawName: \"v-show\",\n                      value: !_vm.isClick,\n                      expression: \"!isClick\",\n                    },\n                  ],\n                  staticClass: \"btn\",\n                  staticStyle: { \"background-color\": \"#ccc\" },\n                },\n                [_vm._v(\" 点击确认下单 \")]\n              ),\n            ]),\n          ]\n        ),\n        _c(\n          \"view\",\n          {\n            directives: [\n              {\n                name: \"show\",\n                rawName: \"v-show\",\n                value: _vm.status == 1,\n                expression: \"status == 1\",\n              },\n            ],\n            staticClass: \"container\",\n          },\n          [\n            _c(\"view\", { staticClass: \"calling\" }, [\n              _vm._v(\" 正在全力为您呼叫... \"),\n            ]),\n            _c(\"view\", { staticClass: \"confirm-place\" }, [\n              _vm._v(\" 请确认上车地点 \"),\n              _c(\n                \"text\",\n                {\n                  staticStyle: {\n                    width: \"60%\",\n                    color: \"#fb841e\",\n                    overflow: \"hidden\",\n                    \"white-space\": \"nowrap\",\n                    \"text-overflow\": \"ellipsis\",\n                  },\n                },\n                [_vm._v(_vm._s(_vm.startPlace.name))]\n              ),\n            ]),\n            _c(\"view\", { staticClass: \"cancel-order\" }, [\n              _c(\n                \"button\",\n                { staticClass: \"btn\", on: { tap: _vm.cancelOrder } },\n                [_vm._v(\"取消订单\")]\n              ),\n            ]),\n          ]\n        ),\n        _c(\n          \"view\",\n          {\n            directives: [\n              {\n                name: \"show\",\n                rawName: \"v-show\",\n                value: _vm.status == 2,\n                expression: \"status == 2\",\n              },\n            ],\n            staticClass: \"container\",\n          },\n          [\n            _c(\"view\", { staticClass: \"driver-info\" }, [\n              _c(\"view\", { staticClass: \"text-info\" }, [\n                _c(\n                  \"view\",\n                  { staticStyle: { \"font-size\": \"22px\", color: \"#000\" } },\n                  [_vm._v(_vm._s(_vm.driver.licenseTag))]\n                ),\n                _c(\n                  \"view\",\n                  {\n                    staticStyle: {\n                      \"font-size\": \"16px\",\n                      color: \"rgb(94, 94, 94)\",\n                    },\n                  },\n                  [_vm._v(_vm._s(_vm.driver.carInfo))]\n                ),\n                _c(\"view\", { staticStyle: { \"font-size\": \"14px\" } }, [\n                  _vm._v(\n                    _vm._s(_vm.driver.name) +\n                      \" \" +\n                      _vm._s(_vm.driver.score) +\n                      \" \" +\n                      _vm._s(_vm.driver.orderNum) +\n                      \"单\"\n                  ),\n                ]),\n              ]),\n              _c(\"view\", { staticClass: \"img-info\" }, [\n                _c(\"image\", {\n                  staticStyle: {\n                    width: \"50px\",\n                    height: \"50px\",\n                    \"border-radius\": \"50%\",\n                  },\n                  attrs: {\n                    src: _vm.driver.avatar\n                      ? _vm.driver.avatar\n                      : \"../images/usericon.png\",\n                  },\n                }),\n              ]),\n            ]),\n            _c(\"view\", { staticClass: \"coming\" }, [\n              _vm._v(\" 司机正在全力赶来，请避开拥挤人群等候 \"),\n              _c(\"view\", { staticClass: \"tips\" }, [\n                _vm._v(\"请前往 \"),\n                _c(\"text\", { staticStyle: { color: \"#fb841e\" } }, [\n                  _vm._v(_vm._s(_vm.startPlace.name)),\n                ]),\n                _vm._v(\" 上车 \"),\n              ]),\n            ]),\n          ]\n        ),\n        _c(\n          \"view\",\n          {\n            directives: [\n              {\n                name: \"show\",\n                rawName: \"v-show\",\n                value: _vm.status == 3,\n                expression: \"status == 3\",\n              },\n            ],\n            staticClass: \"container\",\n          },\n          [\n            _c(\"view\", { staticClass: \"driver-info\" }, [\n              _c(\"view\", { staticClass: \"text-info\" }, [\n                _c(\n                  \"view\",\n                  { staticStyle: { \"font-size\": \"22px\", color: \"#000\" } },\n                  [_vm._v(_vm._s(_vm.driver.licenseTag))]\n                ),\n                _c(\n                  \"view\",\n                  {\n                    staticStyle: {\n                      \"font-size\": \"16px\",\n                      color: \"rgb(94, 94, 94)\",\n                    },\n                  },\n                  [_vm._v(_vm._s(_vm.driver.carInfo))]\n                ),\n                _c(\"view\", { staticStyle: { \"font-size\": \"14px\" } }, [\n                  _vm._v(\n                    _vm._s(_vm.driver.name) +\n                      \" \" +\n                      _vm._s(_vm.driver.score) +\n                      \" \" +\n                      _vm._s(_vm.driver.orderNum) +\n                      \"单\"\n                  ),\n                ]),\n              ]),\n              _c(\"view\", { staticClass: \"img-info\" }, [\n                _c(\"image\", {\n                  staticStyle: {\n                    width: \"50px\",\n                    height: \"50px\",\n                    \"border-radius\": \"50%\",\n                  },\n                  attrs: { src: _vm.driver.avatar },\n                }),\n              ]),\n            ]),\n            _c(\"view\", { staticClass: \"coming\" }, [\n              _vm._v(\" 正在前往目的地 \"),\n              _c(\"view\", { staticClass: \"tips\" }, [\n                _vm._v(\"请系好安全带，佩戴好口罩，安全出行\"),\n              ]),\n            ]),\n          ]\n        ),\n        _c(\n          \"view\",\n          {\n            directives: [\n              {\n                name: \"show\",\n                rawName: \"v-show\",\n                value: _vm.status == 4,\n                expression: \"status == 4\",\n              },\n            ],\n            staticClass: \"container\",\n          },\n          [\n            _c(\"view\", { staticClass: \"calling\" }, [_vm._v(\" 已到达目的地 \")]),\n            _c(\"view\", { staticClass: \"confirm-place\" }, [\n              _vm._v(\" 从 \"),\n              _c(\n                \"text\",\n                {\n                  staticStyle: {\n                    width: \"40%\",\n                    color: \"#fb841e\",\n                    overflow: \"hidden\",\n                    \"white-space\": \"nowrap\",\n                    \"text-overflow\": \"ellipsis\",\n                  },\n                },\n                [_vm._v(_vm._s(_vm.startPlace.name))]\n              ),\n              _vm._v(\" 到 \"),\n              _c(\n                \"text\",\n                {\n                  staticStyle: {\n                    width: \"40%\",\n                    color: \"#fb841e\",\n                    overflow: \"hidden\",\n                    \"white-space\": \"nowrap\",\n                    \"text-overflow\": \"ellipsis\",\n                  },\n                },\n                [_vm._v(_vm._s(_vm.endPlace.name))]\n              ),\n            ]),\n            _c(\"view\", { staticClass: \"cancel-order\" }, [\n              _c(\"button\", { staticClass: \"btn\", on: { tap: _vm.payMoney } }, [\n                _vm._v(\"点击支付费用 {{}}元\"),\n              ]),\n            ]),\n          ]\n        ),\n      ]\n    ),\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","module.exports = __webpack_public_path__ + \"pages/images/circle.png\";","module.exports = __webpack_public_path__ + \"pages/images/current-location.png\";","module.exports = __webpack_public_path__ + \"pages/images/toplace.png\";","module.exports = __webpack_public_path__ + \"pages/images/usericon.png\";","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/@tarojs/taro-loader/lib/raw.js!./taxi.vue\"\nvar config = {\"navigationBarTitleText\":\"满满打车\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/taxi/taxi', {root:{cn:[]}}, config || {}))\n\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./taxi.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./taxi.vue?vue&type=script&lang=js&\"","export * from \"-!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./taxi.vue?vue&type=template&id=0ed8821b&\"","export function getCost(lat1, lng1, lat2, lng2) {\r\n  var radLat1 = (lat1 * Math.PI) / 180.0;\r\n  var radLat2 = (lat2 * Math.PI) / 180.0;\r\n  var a = radLat1 - radLat2;\r\n  var b = (lng1 * Math.PI) / 180.0 - (lng2 * Math.PI) / 180.0;\r\n  var s =\r\n    2 *\r\n    Math.asin(\r\n      Math.sqrt(\r\n        Math.pow(Math.sin(a / 2), 2) +\r\n          Math.cos(radLat1) * Math.cos(radLat2) * Math.pow(Math.sin(b / 2), 2)\r\n      )\r\n    );\r\n  s = s * 6378.137;\r\n  s = Math.round(s * 10000) / 10000; // 单位千米\r\n  console.log(\"距离\", s);\r\n  return s < 3 ? 10.00 : (10 + (s - 3) * 3).toFixed(2);\r\n}\r\n"],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC6IA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AASA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAlCA;AA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AADA;AAGA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AADA;AAHA;AAOA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AAbA;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAQA;AACA;AAMA;AACA;AAAA;AACA;AAzBA;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAQA;AACA;AAMA;AACA;AAAA;AACA;AAxBA;AA0BA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AADA;AAHA;AAOA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AADA;AAHA;AAOA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AADA;AAHA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAWA;AACA;AAhPA;AAnDA;;;;;;;;;;;;;ACxKA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC/UA;;;;;;;;;;;;ACAA;;;;;;;;;;;;ACAA;;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACNA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAQA;AACA;AACA;AAAA;AACA;AACA;;;;A","sourceRoot":""}